<html lang="en-US" class=""><!--<![endif]--><head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width">
	<title>AJAX call triggers 500 internal server error | OOPS TECH BLOG</title>

	<meta content="www.oopstechblog.com" name="AUTHOR">
	
<link rel="canonical" href="http://blog.weston-fl.com/ajax-call-triggers-500-internal-server-error/">
<link rel="dns-prefetch" href="//fonts.googleapis.com">

<link rel="stylesheet" id="jsticket-bootstarp-css" href="http://getbootstrap.com/dist/css/bootstrap.min.css" type="text/css" media="all">
<link rel="stylesheet" id="parent-style-css" href="style.css" type="text/css" media="all">
<link rel="stylesheet" id="twentyfourteen-lato-css" href="https://fonts.googleapis.com/css?family=Lato%3A300%2C400%2C700%2C900%2C300italic%2C400italic%2C700italic&amp;subset=latin%2Clatin-ext" type="text/css" media="all">

<link rel="stylesheet" id="twentyfourteen-style-css" href="style.css" type="text/css" media="all">

<meta name="generator" content="WordPress 4.7.2">
<link rel="shortlink" href="http://blog.weston-fl.com/?p=3771">
<link rel="alternate" type="application/json+oembed" href="http://blog.weston-fl.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Fblog.weston-fl.com%2Fajax-call-triggers-500-internal-server-error%2F">

</head>

<body class="post-template-default single single-post postid-3771 single-format-standard group-blog masthead-fixed singular">
<div id="page" class="hfeed site">
	
	<header id="masthead" class="site-header" role="banner">
		<div class="header-main">
			<h1 class="site-title"><a href="http://blog.weston-fl.com/" rel="home">OOPS TECH BLOG</a></h1>
			<div class="search-toggle">
				<a href="#search-container" class="screen-reader-text">Search</a>
			</div>

			<nav id="primary-navigation" class="site-navigation primary-navigation" role="navigation">
				<button class="menu-toggle">Primary Menu</button>
				<a class="screen-reader-text skip-link" href="#content">Skip to content</a>
				<div class="menu-top-right-menu-container"><ul id="menu-top-right-menu" class="nav-menu"><li id="menu-item-3339" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-3339"><a href="http://blog.weston-fl.com/">Home</a></li>
<li id="menu-item-3209" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3209"><a href="http://blog.weston-fl.com/about/">About us</a></li>
<li id="menu-item-3210" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3210"><a href="http://blog.weston-fl.com/contact-us/">Contact us</a></li>
<li id="menu-item-3208" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3208"><a href="http://blog.weston-fl.com/downloads/">Support</a></li>
<li id="menu-item-3338" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3338"><a href="http://blog.weston-fl.com/support-ticket-controlpanel/">Submit a ticket</a></li>
</ul></div>			</nav>
		</div>

		<div id="search-container" class="search-box-wrapper hide">
			<div class="search-box">
				<form role="search" method="get" class="search-form" action="http://blog.weston-fl.com/">
				<label>
					<span class="screen-reader-text">Search for:</span>
					<input type="search" class="search-field" placeholder="Search ?" value="" name="s">
				</label>
				<input type="submit" class="search-submit" value="Search">
			</form>			</div>
		</div>
	</header><!-- #masthead -->

	<div id="main" class="site-main">

	<div id="primary" class="content-area">
		<div id="content" class="site-content" role="main">
			
<article id="post-3771" class="post-3771 post type-post">
	
	<header class="entry-header">
		<h1 class="entry-title">AJAX call triggers 500 internal server error</h1>	</header><!-- .entry-header -->

		<div class="entry-content">
		<h3>Question</h3><p>Having a problem with <strong>WordPress</strong> <strong>Ajax</strong> calls. In the development environment and in the admin mode on the production server, the ajax works perfectly. When the JQuery post call is made by the same code and with the same, well formatted, request data on the front-end, it fails. Debugged the client side and got the same server response with both the Safari Web Inspector and the Chrome Developer tools. The error message is <strong>Internal Server Error (500)</strong>. What?s going on with IIS 10.0 ? How to set up IIS to accept front-end Ajax calls? Should I install Ajax.Net ?</p>
<span id="more-3771"></span>
<h3>Solution</h3>
<p>AJAX (Asynchronous JavaScript And XML) is a client-side technology. On the server side the <strong>IIS can?t distinguish between normal web page and AJAX POST, GET requests</strong>. There is no need to ?setup? your IIS or Apache for AJAX. jQuery is nothing else than an easy-to-use wrapper for the native JavaScript. ASP.NET AJAX is a set of technologies to add AJAX support to ASP.NET. It integrates client script libraries with the ASP.NET. It has nothing to do with your PHP WordPress side.</p><p>
</p>500 internal server error is an irritating all-you-cannot-eat message. To trace the error, first <strong>look at the logs of IIS</strong> to discover something more about the infamous error, and second, <strong>find and look at the WordPress plugins and themes</strong>, ie. the PHP code. The typical cause is <strong>conflicts between plugins</strong> and/or themes, including child theme with your code. It?s true for other technologies as well, <strong>always look at the web site installation, identify possible conficts, and check out your server side code.</strong><p></p>
<h3>IIS detailed error log</h3>
<p>1. On Windows Server 2008/2012 you can use Advanced Logging option of IIS 7.5 or 8. You may need to download and install it <a href="https://www.microsoft.com/en-us/download/details.aspx?id=7211" title="IIS Advanced Logging" target="_blank"> from Microsoft.</a> Check out the latest version if it?s already available for IIS 10.</p><p>
</p><p>2. Go to the server. Just to be sure, look at the folders of PHP and website if permissions are set properly. <strong>Open IIS Manager</strong>, select server and website. Enable <strong>Trace Logging for Failed Requests</strong> regardless of the use of the Advanced Logging option. In the Actions pane at the Configure group, click Failed Request Tracing and set the directory you will use:</p>
<p><img src="oopstech-iis-detailed-error-trace.jpg" width="640" height="auto" alt="IIS trace error"></p>
<p>3. Open your web browser and load the website. When needed, activate whatever you need to run the AJAX call, for example click on a button if that initiate the call. <strong>Recheck AJAX ?data? request if it?s really formatted well</strong>.</p>
<p>4. Go back to the server, find the log directory where you will be greated by a couple of large xml files. Open the latest one the IIS generated when serving your site?s request. If you run into an access error, copy the file into a folder where you have open/read permissions. Well, you?ll spend some time to locate the line you really wanted to see. Like this:</p>
<p><img src="oopstech-iis-detailed-error.jpg" width="640" height="auto" alt="IIS trace error"></p>
<p>Now we know that in this case the 500 error is triggered by ?Reached the end of the file?. That rarely means the PHP had problems reading a physical file though.</p>
<h3>WP plugin conflicts at handling AJAX calls</h3>
<p>1. <strong>Must do checklist</strong></p>
<p>? Step A: disable all other plugins or themes.</p>
<p>? Step B: reload the web site on the client side. Check out if the 500 error pops up. If not, activate the next plugin.</p>
<p>? Step C: go back to Step B and repeat it until the suspect has been caught. If you are lucky.</p>
<p>If not, your code is likely in conflict with WordPress (PHP installation) or parent theme.</p>
<p>2. <strong>PHP, WordPress and your code</strong></p><p>
</p><p>Probably you are unlucky and found nothing so far. Switch on WP debug mode (wp-config.php) and see if it helps locate suspects:</p>

<div class="codecolorer-container text mac-classic commentcode" style="overflow:auto;white-space:nowrap;"><code>// Enable WP_DEBUG mode<br>
define( 'WP_DEBUG', true );<br>
// Debug log file is /wp-content/debug.log:<br>
define( 'WP_DEBUG_LOG', true );<br>
// Disable display of errors and warnings not to distract visitors any longer<br>
define( 'WP_DEBUG_DISPLAY', false );<br>
ini_set( 'display_errors', 0 );<br>
// Use developer versions of core JS and CSS files when you need so<br>
// define( 'SCRIPT_DEBUG', true );</code></div>

<p>Likely found something relevant here.</p>
<p><strong>3. admin-ajax.php</strong></p>
<p>You may want to diagnose and look at <strong>admin-ajax.php</strong> to see how server responses (How ? Use Chrome Developer tools for example). Initially admin-ajax.php was used for autosave, post locking and log-in expiration warnings. <strong>You will notice third party plugins polling this file frequently</strong>, thinking it?s a horse race, that may cause problems without any code error, but doing nothing good at all. Each POST request had a corresponding PHP script execution on the server using expensive CPU time.</p><p>
</p><p><strong>4. Your code</strong></p>
<p> We all have bad days and write bad codes, and sometimes need another two eyes to catch the obvious. Invite someone to look at your code and offer a free cup of tea.</p>	</div><!-- .entry-content -->
	</article><!-- #post-## -->
		</div><!-- #content -->
	</div><!-- #primary -->

<!-- #content-sidebar --><div id="secondary">
		<h2 class="site-description">Blog for us</h2>
	
		<nav role="navigation" class="navigation site-navigation secondary-navigation">
		<div class="menu-left-menu-container"><ul id="menu-left-menu" class="menu"><li id="menu-item-3470" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3470"><a href="http://blog.weston-fl.com/category/apple/ios-apple/">iOS</a></li>
<li id="menu-item-3365" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3365"><a href="http://blog.weston-fl.com/category/apple/xcode-apple/">Xcode</a></li>
<li id="menu-item-3367" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3367"><a href="http://blog.weston-fl.com/category/google-2/android/">Android</a></li>
<li id="menu-item-3368" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3368"><a href="http://blog.weston-fl.com/category/programming/java/">Java</a></li>
<li id="menu-item-3366" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3366"><a href="http://blog.weston-fl.com/category/microsoft/windows-microsoft/">Windows</a></li>
<li id="menu-item-3369" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3369"><a href="http://blog.weston-fl.com/category/programming/c/">C#</a></li>
<li id="menu-item-3469" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-3469"><a href="http://blog.weston-fl.com/category/raspberry-pi/">Raspberry Pi</a></li>
</ul></div>	</nav>
	
		<div id="primary-sidebar" class="primary-sidebar widget-area" role="complementary">
		<aside id="text-4" class="widget widget_text"><h1 class="widget-title">Previous posts</h1>			<div class="textwidget">Use Search to find previous posts. OS updates and software changes are frequent. Yesterday's hardware is obsolate. Always check out the date. </div>
		</aside>	</div><!-- #primary-sidebar -->
	</div><!-- #secondary -->

		</div><!-- #main -->

		<footer id="colophon" class="site-footer" role="contentinfo">

			
			<div class="site-info">
				<a href="https://www.weston-fl.com" target="_blank" hreflang="en" title="Web design, programming, ios, android, wordpress services in Weston, Florida">
					&copy; Copyright Weston Digital Solutions? 1999-2017. All rights reserved.
				</a>
				&nbsp;·&nbsp;<a href="https://weston-fl.com/legal-notes/" hreflang="en" target="_blank" title="Legal Notes from Weston Digital Solutions">Terms &amp; Conditions</a>
				&nbsp;·&nbsp;<a href="mailto:webmaster@weston-fl.com" hreflang="en" target="_blank" title="Contact webmaster for issues with this web site">Webmaster</a>
			</div><!-- .site-info -->
		</footer><!-- #colophon -->
	</div><!-- #page -->

</body></html>